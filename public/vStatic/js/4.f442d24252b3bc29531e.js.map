{"version":3,"sources":["webpack:///./node_modules/vant/es/list/index.js","webpack:///src/pages/Time/Time.vue","webpack:///./src/pages/Time/Time.vue?3429","webpack:///./src/pages/Time/Time.vue"],"names":["__webpack_exports__","Object","__WEBPACK_IMPORTED_MODULE_0__utils_create__","render","_vm","this","_h","$createElement","_c","_self","class","b","_t","directives","name","rawName","value","loading","expression","_v","_s","loadingText","$t","model","prop","props","Boolean","finished","immediateCheck","type","default","offset","Number","String","mounted","scroller","__WEBPACK_IMPORTED_MODULE_1__utils_scroll__","getScrollEventTarget","$el","handler","$nextTick","onScroll","destroyed","activated","deactivated","watch","methods","el","scrollerHeight","getVisibleHeight","getComputedStyle","display","offsetParent","targetBottom","getScrollTop","reachBottom","scrollHeight","getElementTop","$emit","bind","binded","__WEBPACK_IMPORTED_MODULE_2__utils_event__","data","list","cardId","lastid","created","util","onLoad","_getTimeList","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","i","wrap","_context","prev","next","data_tracking","cardid","sent","length","push","id","t0","stop","components","List","Icon","icon","Time_Time","staticClass","attrs","on","load","callback","$$v","_l","item","index","key","src","avatar_url","alt","msg","add_time_show","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","Time","ssrContext"],"mappings":"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","file":"vStatic/js/4.f442d24252b3bc29531e.js","sourcesContent":["\nimport create from '../utils/create';\nimport utils from '../utils/scroll';\nimport { on, off } from '../utils/event';\n\nexport default create({\n  render: function render() {\n    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c('div', { class: _vm.b() }, [_vm._t(\"default\"), _c('div', { directives: [{ name: \"show\", rawName: \"v-show\", value: _vm.loading, expression: \"loading\" }], class: _vm.b('loading') }, [_vm._t(\"loading\", [_c('loading'), _c('span', { class: _vm.b('loading-text') }, [_vm._v(_vm._s(_vm.loadingText || _vm.$t('loadingTip')))])])], 2)], 2);\n  },\n\n  name: 'list',\n\n  model: {\n    prop: 'loading'\n  },\n\n  props: {\n    loading: Boolean,\n    finished: Boolean,\n    immediateCheck: {\n      type: Boolean,\n      default: true\n    },\n    offset: {\n      type: Number,\n      default: 300\n    },\n    loadingText: String\n  },\n\n  mounted: function mounted() {\n    this.scroller = utils.getScrollEventTarget(this.$el);\n    this.handler(true);\n\n    if (this.immediateCheck) {\n      this.$nextTick(this.onScroll);\n    }\n  },\n  destroyed: function destroyed() {\n    this.handler(false);\n  },\n  activated: function activated() {\n    this.handler(true);\n  },\n  deactivated: function deactivated() {\n    this.handler(false);\n  },\n\n\n  watch: {\n    loading: function loading() {\n      this.$nextTick(this.onScroll);\n    },\n    finished: function finished() {\n      this.$nextTick(this.onScroll);\n    }\n  },\n\n  methods: {\n    onScroll: function onScroll() {\n      if (this.loading || this.finished) {\n        return;\n      }\n\n      var el = this.$el;\n      var scroller = this.scroller;\n\n      var scrollerHeight = utils.getVisibleHeight(scroller);\n\n      /* istanbul ignore next */\n      if (!scrollerHeight || utils.getComputedStyle(el).display === 'none' || el.offsetParent === null) {\n        return;\n      }\n\n      var scrollTop = utils.getScrollTop(scroller);\n      var targetBottom = scrollTop + scrollerHeight;\n\n      var reachBottom = false;\n\n      /* istanbul ignore next */\n      if (el === scroller) {\n        reachBottom = scroller.scrollHeight - targetBottom < this.offset;\n      } else {\n        var elBottom = utils.getElementTop(el) - utils.getElementTop(scroller) + utils.getVisibleHeight(el);\n        reachBottom = elBottom - scrollerHeight < this.offset;\n      }\n\n      /* istanbul ignore else */\n      if (reachBottom) {\n        this.$emit('input', true);\n        this.$emit('load');\n      }\n    },\n    handler: function handler(bind) {\n      /* istanbul ignore else */\n      if (this.binded !== bind) {\n        this.binded = bind;\n        (bind ? on : off)(this.scroller, 'scroll', this.onScroll);\n      }\n    }\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vant/es/list/index.js\n// module id = QhyB\n// module chunks = 1 4","<template>\n    <div class=\"time\">\n        <list\n            v-model=\"loading\"\n            :finished=\"finished\"\n            @load=\"onLoad\"\n            :offset=\"offset\">\n            <div class=\"item\" v-for=\"(item, index) of list\" :key=\"index\">\n                <img class=\"avatar\" :src=\"item.avatar_url\" alt=\"\">\n                <div class=\"main\">\n                    <p class=\"text\">{{item.msg}}</p>\n                    <p class=\"time\">{{item.add_time_show}}</p>\n                </div>\n            </div>\n        </list>\n        <div v-if=\"list.length <= 0 && finished\" class=\"no-data\">暂无数据...</div>\n    </div>\n</template>\n\n<script>\nimport { List, Icon } from 'vant';\nimport { getTimeList } from '../../server/data-tracking';\nimport { getItem } from '../../util/util';\nexport default {\n    data () {\n       return {\n           loading  : false,\n           finished : false,\n           list     : [],\n           offset   : -50,\n           cardId   : 0,\n           lastid   : 0\n       };\n    },\n    created() {\n        if(getItem('cardId')) {\n            this.cardId = getItem('cardId');\n        }\n    },\n    methods: {\n        onLoad() {\n            this._getTimeList();\n        },\n        async _getTimeList() {\n            try {\n                let res = await getTimeList({cardid: this.cardId, lastid: this.lastid });\n                if(res.data.length > 0) {\n                    // debugger;\n                    for(let i=0; i<res.data.length; i++){\n                        this.list.push(res.data[i]);\n                    }\n                    this.lastid     = res.data[res.data.length-1].id;\n                    this.loading    = false;\n                    this.finished   = false;\n                }else{\n                    this.loading    = false;\n                    this.finished   = true;\n                }\n            } catch (error) {\n                \n            }\n        }\n    },\n    components: {\n        List,\n        Icon\n    }\n}\n</script>\n\n<style lang='less' scoped>\n@import url(./index.less);\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/Time/Time.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"time\"},[_c('list',{attrs:{\"finished\":_vm.finished,\"offset\":_vm.offset},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item,index){return _c('div',{key:index,staticClass:\"item\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":item.avatar_url,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"main\"},[_c('p',{staticClass:\"text\"},[_vm._v(_vm._s(item.msg))]),_vm._v(\" \"),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(item.add_time_show))])])])})),_vm._v(\" \"),(_vm.list.length <= 0 && _vm.finished)?_c('div',{staticClass:\"no-data\"},[_vm._v(\"暂无数据...\")]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9c405590\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Time/Time.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9c405590\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Time.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Time.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Time.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9c405590\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Time.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-9c405590\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Time/Time.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}